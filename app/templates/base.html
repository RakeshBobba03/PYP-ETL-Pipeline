<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Match Review</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">

    <!-- Icon Font -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/9.7.0/css/materialdesignicons.min.css" rel="stylesheet">

    <!-- Toast notifications CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/toasts.css') }}">

    <style>
      :root {
        --bg:       #000000;
        --card-bg:  #1a1a1a;
        --primary:  #D4AF37;
        --accent:   #8FB339;
        --text:     #F4EBD0;
        --muted:    #777F52;
      }
      * { box-sizing: border-box; margin:0; padding:0; }
      body {
        background: var(--bg);
        color: var(--text);
        font-family: 'Roboto', sans-serif;
        line-height:1.6;
      }
      a { color: var(--primary); text-decoration: none; }
      a:hover { color: var(--accent); }

      header {
        padding: 1rem; text-align: center;
        background: linear-gradient(90deg, #000 0%, #111 100%);
        box-shadow: 0 2px 8px rgba(0,0,0,0.7);
        font-family: 'Orbitron', sans-serif;
      }
      header h1 { font-size:1.8rem; color: var(--primary); }

      nav {
        display:flex; justify-content:center; gap:2rem; margin-top:.5rem;
      }
      nav a {
        position: relative; padding:.25rem .5rem; font-weight:bold;
      }
      nav a:after {
        content:''; position:absolute; bottom:-4px; left:0;
        width:0; height:2px; background:var(--accent);
        transition: width .3s;
      }
      nav a:hover:after { width:100%; }

      .container {
        max-width:900px; margin:2rem auto; padding:0 1rem;
      }

      .btn {
        display:inline-flex; align-items:center; gap:.5rem;
        padding:.5rem 1rem; border:2px solid var(--primary);
        background:transparent; color:var(--primary);
        font-family:'Orbitron',sans-serif; letter-spacing:.5px;
        cursor:pointer; transition:background .3s,color .3s;
      }
      .btn.primary { border-color: var(--primary); }
      .btn.accent  { border-color: var(--accent); }
      .btn:hover {
        background: var(--primary); color: var(--bg);
      }
      .btn.accent:hover {
        background: var(--accent); color: var(--bg);
      }

      .card {
        background: var(--card-bg);
        border-left:4px solid var(--primary);
        padding:1rem; margin-bottom:1.5rem;
        box-shadow:0 4px 12px rgba(0,0,0,0.6);
        border-radius:4px;
      }
      .card h2 {
        font-family:'Orbitron',sans-serif;
        font-size:1.4rem; color:var(--primary);
        margin-bottom:.5rem;
      }
      .card p { color:var(--muted); margin-bottom:1rem; }

      .radio-list {
        list-style:none; padding-left:0;
      }
      .radio-list li { margin:.5rem 0; }
      .radio-list input[type="radio"] {
        accent-color: var(--accent);
        transform: scale(1.2); margin-right:.5rem;
      }

      .footer {
        text-align:center; padding:2rem 0;
        font-size:.9rem; color:var(--muted);
      }
    </style>
  </head>

  <body>
    <!-- Toast container (for JS to inject into) -->
    <div id="toast-container"></div>

    <header>
      <h1><i class="mdi mdi-graph-outline"></i> Product &amp; Ingredient Match Review</h1>
      <nav>
        <a href="{{ url_for('main.upload_file') }}">Upload Submission</a>
        <a href="{{ url_for('main.review_list') }}">Review Matches</a>
      </nav>
    </header>

    <div class="container">
      {% block content %}{% endblock %}
    </div>

    <div class="footer">
      &copy; {{ now().year }} Your Company Name
    </div>

    <!-- Toast rendering script -->
    <script>
      // Grab Flask flash messages
      const flashes = {{ get_flashed_messages(with_categories=true)|tojson }};
      function showToast(category, message) {
        const cont = document.getElementById('toast-container');
        const toast = document.createElement('div');
        toast.className = 'toast toast--' + category;
        toast.innerText = message;
        cont.appendChild(toast);
        // Force reflow
        getComputedStyle(toast).opacity;
        toast.classList.add('toast--visible');
        // Auto-dismiss
        setTimeout(() => {
          toast.classList.remove('toast--visible');
          toast.addEventListener('transitionend', () => toast.remove());
        }, 4000);
      }
      document.addEventListener('DOMContentLoaded', () => {
        flashes.forEach(([cat, msg]) => showToast(cat, msg));
      });
    </script>
  </body>
</html>

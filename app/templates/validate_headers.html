{% extends "base.html" %}
{% block content %}
  <!-- Toast notifications for validation feedback -->
  <script>
    // Show toast notifications based on URL parameters
    document.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      const status = urlParams.get('status');
      const message = urlParams.get('message');
      
      if (status && message) {
        const decodedMessage = decodeURIComponent(message);
        switch(status) {
          case 'success':
            showSuccess(decodedMessage);
            break;
          case 'error':
            showError(decodedMessage);
            break;
          case 'warning':
            showWarning(decodedMessage);
            break;
          case 'info':
            showInfo(decodedMessage);
            break;
        }
        
        // Clean up URL parameters
        window.history.replaceState({}, document.title, window.location.pathname);
      }
    });
  </script>
<div class="card">
  <h2><i class="mdi mdi-file-check"></i> Header Validation & Mapping</h2>
  <p>Review and confirm how your file headers map to the Member schema fields.</p>
  
  <div class="file-info">
    <h4>File: {{ filename }}</h4>
    <div class="validation-summary">
      <div class="validation-item {% if validation.is_valid %}success{% else %}error{% endif %}">
        <i class="mdi mdi-{% if validation.is_valid %}check-circle{% else %}alert-circle{% endif %}"></i>
        <span>
          {% if validation.is_valid %}
            All required columns are mapped correctly!
          {% else %}
            Missing required columns: {{ validation.missing_fields|join(', ') }}
          {% endif %}
        </span>
      </div>
      
      {% if validation.missing_important %}
      <div class="validation-item warning">
        <i class="mdi mdi-alert"></i>
        <span>
          Missing important columns: {{ validation.missing_important|join(', ') }}
        </span>
      </div>
      {% endif %}
      
      <div class="validation-stats">
        <span>Headers: {{ validation.total_headers }}</span>
        <span>Mapped: {{ validation.mapped_headers }}</span>
        <span>Unmapped: {{ validation.total_headers - validation.mapped_headers }}</span>
      </div>
      
      <div class="field-categories">
        <div class="category required">
          <h5><i class="mdi mdi-star"></i> Required Fields ({{ validation.required_fields|length }})</h5>
          <div class="field-list">
            {% for field in validation.required_fields %}
              <span class="field-item {% if field in validation.mapped_fields %}mapped{% else %}missing{% endif %}">
                {{ field }}
                {% if field in validation.mapped_fields %}
                  <i class="mdi mdi-check"></i>
                {% else %}
                  <i class="mdi mdi-close"></i>
                {% endif %}
              </span>
            {% endfor %}
          </div>
        </div>
        
        <div class="category important">
          <h5><i class="mdi mdi-star-outline"></i> Important Fields ({{ validation.important_fields|length }})</h5>
          <div class="field-list">
            {% for field in validation.important_fields %}
              <span class="field-item {% if field in validation.mapped_fields %}mapped{% else %}missing{% endif %}">
                {{ field }}
                {% if field in validation.mapped_fields %}
                  <i class="mdi mdi-check"></i>
                {% else %}
                  <i class="mdi mdi-close"></i>
                {% endif %}
              </span>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Header Mapping Section -->
  <div class="mapping-section">
    <h4><i class="mdi mdi-arrow-right-bold"></i> Header Mapping</h4>
    <p>Review how your file headers map to schema fields. You can modify the mapping if needed.</p>
    
    <div class="mapping-table">
      <div class="mapping-header">
        <div class="col">File Header</div>
        <div class="col">Schema Field</div>
        <div class="col">Confidence</div>
        <div class="col">Actions</div>
      </div>
      
      {% for header in headers %}
      <div class="mapping-row">
        <div class="col file-header">{{ header }}</div>
        <div class="col schema-field">
          {% if header in mapping %}
                         <select class="field-mapping" data-header="{{ header }}" title="Map header '{{ header }}' to schema field">
               <option value="{{ mapping[header].schema_field }}" selected>
                 {{ mapping[header].schema_field }}
               </option>
               {% for field, variations in schema_fields.items() %}
                 {% if field != mapping[header].schema_field %}
                   <option value="{{ field }}">{{ field }}</option>
                 {% endif %}
               {% endfor %}
               <option value="__unmapped__">-- Unmapped --</option>
             </select>
          {% else %}
                         <select class="field-mapping" data-header="{{ header }}" title="Map header '{{ header }}' to schema field">
               <option value="__unmapped__" selected>-- Unmapped --</option>
               {% for field, variations in schema_fields.items() %}
                 <option value="{{ field }}">{{ field }}</option>
               {% endfor %}
             </select>
          {% endif %}
        </div>
        <div class="col confidence">
          {% if header in mapping %}
            <span class="confidence-score {{ mapping[header].confidence|confidence_class }}">
              {{ mapping[header].confidence }}%
            </span>
          {% else %}
            <span class="confidence-score unmapped">0%</span>
          {% endif %}
        </div>
        <div class="col actions">
          {% if header in mapping %}
            <span class="status mapped">
              <i class="mdi mdi-check"></i> Mapped
            </span>
          {% else %}
            <span class="status unmapped">
              <i class="mdi mdi-alert"></i> Unmapped
            </span>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- Member Offerings Section -->
  <div class="offerings-section">
    <h4><i class="mdi mdi-package-variant"></i> Member Offerings Detection</h4>
    <p>Based on your data mapping, the system will automatically detect and assign member offerings based on the presence of specific fields.</p>
    
    <div class="offerings-info">
      <div class="offerings-table">
        <div class="offerings-header">
          <div class="col">Source Field</div>
          <div class="col">Offering Title</div>
          <div class="col">Offering UID</div>
          <div class="col">Source</div>
          <div class="col">Status</div>
        </div>
        
        {% set offerings_mapping = offerings_mapping %}
        
                 {% for field_name, offering_info in offerings_mapping.items() %}
         <div class="offerings-row">
           <div class="col field-name">{{ field_name }}</div>
           <div class="col offering-title">{{ offering_info.title }}</div>
           <div class="col offering-uid">{{ offering_info.uid }}</div>
           <div class="col source">
             <span class="source-badge {{ offering_info.source }}">
               <i class="mdi mdi-{{ 'database' if offering_info.source == 'dgraph' else 'alert' }}"></i>
               {{ offering_info.source|title }}
             </span>
           </div>
           <div class="col status">
             {% if field_name in validation.mapped_fields %}
               <span class="status available">
                 <i class="mdi mdi-check"></i> Available
               </span>
             {% else %}
               <span class="status unavailable">
                 <i class="mdi mdi-close"></i> Not Mapped
               </span>
             {% endif %}
           </div>
         </div>
         {% endfor %}
      </div>
    </div>
    
         <div class="offerings-note">
       <i class="mdi mdi-information"></i>
       <span>
         <strong>Note:</strong> Member offerings will be automatically assigned based on the presence of data in the mapped fields. 
         UIDs are dynamically fetched from Dgraph (green badges) or use fallback production UIDs (yellow badges) if Dgraph is unavailable.
         If no offerings are detected, "No Offerings" will be assigned.
       </span>
     </div>
  </div>

  <!-- Data Preview Section -->
  <div class="preview-section">
    <h4><i class="mdi mdi-eye"></i> Data Preview (First 10 Rows)</h4>
    <p>Preview how your data will look after normalization and mapping.</p>
    
    <div class="data-preview">
      {% if sample_data %}
        <table class="preview-table">
          <thead class="preview-header">
            <tr>
              {% for field in sample_data[0].keys() %}
                <th class="preview-col">{{ field }}</th>
              {% endfor %}
            </tr>
          </thead>
          <tbody>
            {% for row in sample_data %}
              <tr class="preview-row">
                {% for field, value in row.items() %}
                  <td class="preview-col">
                    {% if value %}
                      <span class="value">{{ value }}</span>
                    {% else %}
                      <span class="empty">(empty)</span>
                    {% endif %}
                  </td>
                {% endfor %}
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <div class="no-preview">
          <i class="mdi mdi-information"></i>
          <span>No preview data available</span>
        </div>
      {% endif %}
    </div>
  </div>

  <!-- Action Buttons -->
  <!-- Hidden CSRF token field -->
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" id="csrf-token-field">
  
  <div class="action-buttons">
    <button type="button" class="btn secondary" onclick="updateMapping()">
      <i class="mdi mdi-refresh"></i> Update Preview
    </button>
    
    {% if validation.is_valid %}
      <button type="button" class="btn primary" onclick="processFile()">
        <i class="mdi mdi-play"></i> Process File
      </button>
    {% else %}
      <button type="button" class="btn primary" disabled title="Fix missing required columns first">
        <i class="mdi mdi-play"></i> Process File
      </button>
    {% endif %}
    
    <a href="{{ url_for('main.upload_file') }}" class="btn secondary">
      <i class="mdi mdi-arrow-left"></i> Back to Upload
    </a>
  </div>
</div>

<script>
// Store schema fields for reference
const schemaFields = {{ schema_fields|tojson }};

// Update mapping when user changes field selections
document.querySelectorAll('.field-mapping').forEach(select => {
  select.addEventListener('change', function() {
    updateMapping();
  });
  
  // Ensure the selected value is visible on page load
  if (select.value && select.value !== '__unmapped__') {
    select.classList.add('mapped');
  } else {
    select.classList.add('unmapped');
  }
  
  // Add animation class for smooth transitions
  select.addEventListener('change', function() {
    this.classList.add('selection-changed');
    setTimeout(() => this.classList.remove('selection-changed'), 200);
  });
});

function updateMapping() {
  const mapping = {};
  
  // Collect all mappings
  document.querySelectorAll('.field-mapping').forEach(select => {
    const header = select.dataset.header;
    const schemaField = select.value;
    
    if (schemaField !== '__unmapped__') {
      mapping[header] = schemaField;
    }
  });
  
  console.log('Collected mapping:', mapping);
  
  // Create a form to submit the mapping data
  const form = document.createElement('form');
  form.method = 'POST';
  form.action = '{{ url_for("main.update_mapping") }}';
  form.style.display = 'none';
  
  // Add CSRF token
  const csrfToken = document.getElementById('csrf-token-field').value;
  const csrfInput = document.createElement('input');
  csrfInput.type = 'hidden';
  csrfInput.name = 'csrf_token';
  csrfInput.value = csrfToken;
  form.appendChild(csrfInput);
  
  // Add mapping data
  const mappingInput = document.createElement('input');
  mappingInput.type = 'hidden';
  mappingInput.name = 'mapping';
  mappingInput.value = JSON.stringify(mapping);
  form.appendChild(mappingInput);
  
  // Submit the form
  document.body.appendChild(form);
  form.submit();
}

function updateValidationStatus(validation) {
  const validationItem = document.querySelector('.validation-item');
  const validationStats = document.querySelector('.validation-stats');
  
  // Update validation message
  if (validation.is_valid) {
    validationItem.className = 'validation-item success';
    validationItem.innerHTML = '<i class="mdi mdi-check-circle"></i><span>All required columns are mapped correctly!</span>';
  } else {
    validationItem.className = 'validation-item error';
    validationItem.innerHTML = '<i class="mdi mdi-alert-circle"></i><span>Missing required columns: ' + validation.missing_fields.join(', ') + '</span>';
  }
  
  // Update stats
  validationStats.innerHTML = `
    <span>Headers: ${validation.total_headers}</span>
    <span>Mapped: ${validation.mapped_headers}</span>
    <span>Unmapped: ${validation.total_headers - validation.mapped_headers}</span>
  `;
  
  // Update process button state
  const processBtn = document.querySelector('.action-buttons .btn.primary');
  if (validation.is_valid) {
    processBtn.disabled = false;
    processBtn.title = '';
  } else {
    processBtn.disabled = true;
    processBtn.title = 'Fix missing required columns first';
  }
}

function updateDataPreview(sampleData) {
  const dataPreview = document.querySelector('.data-preview');
  
  if (sampleData && sampleData.length > 0) {
    const fields = Object.keys(sampleData[0]);
    
    const previewHTML = `
      <table class="preview-table">
        <thead class="preview-header">
          <tr>
            ${fields.map(field => `<th class="preview-col">${field}</th>`).join('')}
          </tr>
        </thead>
        <tbody>
          ${sampleData.map(row => `
            <tr class="preview-row">
              ${fields.map(field => `
                <td class="preview-col">
                  ${row[field] ? `<span class="value">${row[field]}</span>` : '<span class="empty">(empty)</span>'}
                </td>
              `).join('')}
            </tr>
          `).join('')}
        </tbody>
      </table>
    `;
    
    dataPreview.innerHTML = previewHTML;
  } else {
    dataPreview.innerHTML = `
      <div class="no-preview">
        <i class="mdi mdi-information"></i>
        <span>No preview data available</span>
      </div>
    `;
  }
}

function updateMappingDisplay(mapping) {
  // Update confidence scores and status indicators
  document.querySelectorAll('.field-mapping').forEach(select => {
    const header = select.dataset.header;
    const row = select.closest('.mapping-row');
    const confidenceCol = row.querySelector('.confidence');
    const actionsCol = row.querySelector('.actions');
    
         // Update visual state of dropdown
     if (select.value && select.value !== '__unmapped__') {
       select.classList.remove('unmapped');
       select.classList.add('mapped');
     } else {
       select.classList.remove('mapped');
       select.classList.add('unmapped');
     }
    
    if (header in mapping) {
      const schemaField = mapping[header].schema_field;
      const confidence = mapping[header].confidence;
      
      // Update confidence score
      confidenceCol.innerHTML = `<span class="confidence-score ${getConfidenceClass(confidence)}">${confidence}%</span>`;
      
      // Update status
      actionsCol.innerHTML = '<span class="status mapped"><i class="mdi mdi-check"></i> Mapped</span>';
    } else {
      // Unmapped
      confidenceCol.innerHTML = '<span class="confidence-score unmapped">0%</span>';
      actionsCol.innerHTML = '<span class="status unmapped"><i class="mdi mdi-alert"></i> Unmapped</span>';
    }
  });
}

function getConfidenceClass(confidence) {
  if (confidence >= 90) return 'high';
  if (confidence >= 70) return 'medium';
  return 'low';
}

// Simple function to ensure dropdowns are properly styled
function ensureDropdownStyling() {
  document.querySelectorAll('.field-mapping').forEach(select => {
    if (select.value && select.value !== '__unmapped__') {
      select.classList.remove('unmapped');
      select.classList.add('mapped');
    } else {
      select.classList.remove('mapped');
      select.classList.add('unmapped');
    }
  });
}

// Call this function periodically to maintain styling
setInterval(ensureDropdownStyling, 1000);

function processFile() {
  if (confirm('Are you sure you want to process this file with the current mapping?')) {
    // Create a form and submit it
    const form = document.createElement('form');
    form.method = 'POST';
    form.action = '{{ url_for("main.process_validated_file") }}';
    
    // Add CSRF token
    const csrfToken = document.createElement('input');
    csrfToken.type = 'hidden';
    csrfToken.name = 'csrf_token';
    csrfToken.value = '{{ csrf_token() }}';
    form.appendChild(csrfToken);
    
    document.body.appendChild(form);
    form.submit();
  }
}
</script>

<style>
.validation-summary {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 1rem;
  margin: 1rem 0;
}

.validation-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
  font-weight: 500;
}

.validation-item.success {
  color: var(--success);
}

.validation-item.error {
  color: var(--danger);
}

.validation-item.warning {
  background: rgba(255, 193, 7, 0.1);
  border-color: #ffc107;
  color: #ffc107;
}

.field-categories {
  margin-top: 1rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1rem;
}

.category {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 1rem;
}

.category h5 {
  margin: 0 0 0.75rem 0;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.9rem;
  font-weight: 600;
}

.category.required h5 {
  color: var(--danger);
}

.category.important h5 {
  color: #ffc107;
}

.field-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.field-item {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.8rem;
  font-weight: 500;
  background: var(--bg);
  border: 1px solid var(--border);
}

.field-item.mapped {
  background: rgba(76, 175, 80, 0.1);
  border-color: var(--success);
  color: var(--success);
}

.field-item.missing {
  background: rgba(244, 67, 54, 0.1);
  border-color: var(--danger);
  color: var(--danger);
}

.field-item i {
  font-size: 0.7rem;
}

.offerings-section {
  margin: 2rem 0;
}

.offerings-info {
  border: 1px solid var(--border);
  border-radius: 6px;
  overflow: hidden;
  margin-bottom: 1rem;
}

.offerings-table {
  width: 100%;
}

.offerings-header {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
  background: var(--accent);
  color: white;
  font-weight: 500;
  padding: 0.75rem;
}

.offerings-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
  border-bottom: 1px solid var(--border);
  padding: 0.75rem;
  align-items: center;
}

.offerings-row:last-child {
  border-bottom: none;
}

.offerings-row:nth-child(even) {
  background: var(--bg);
}

.offerings-row .col {
  padding: 0.25rem;
}

.field-name {
  font-weight: 500;
  color: var(--text);
}

.offering-title {
  font-weight: 600;
  color: var(--accent);
}

.offering-uid {
  font-family: monospace;
  font-size: 0.8rem;
  color: var(--muted);
}

.source-badge {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.8rem;
  font-weight: 500;
}

.source-badge.dgraph {
  background: rgba(76, 175, 80, 0.1);
  color: var(--success);
}

.source-badge.fallback {
  background: rgba(255, 193, 7, 0.1);
  color: #ffc107;
}

.status.available {
  color: var(--success);
}

.status.unavailable {
  color: var(--muted);
}

.offerings-note {
  background: rgba(139, 179, 57, 0.1);
  border: 1px solid var(--accent);
  border-radius: 6px;
  padding: 1rem;
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  font-size: 0.9rem;
  line-height: 1.4;
}

.offerings-note i {
  color: var(--accent);
  margin-top: 0.1rem;
}

.validation-stats {
  display: flex;
  gap: 1rem;
  font-size: 0.9rem;
  color: var(--muted);
}

.mapping-section, .preview-section {
  margin: 2rem 0;
}

.mapping-table {
  border: 1px solid var(--border);
  border-radius: 6px;
  overflow: hidden;
}

.mapping-header {
  display: grid;
  grid-template-columns: 2fr 2fr 1fr 1fr;
  background: var(--accent);
  color: white;
  font-weight: 500;
  padding: 0.75rem;
}

.mapping-row {
  display: grid;
  grid-template-columns: 2fr 2fr 1fr 1fr;
  border-bottom: 1px solid var(--border);
  padding: 0.75rem;
  align-items: center;
}

.mapping-row:last-child {
  border-bottom: none;
}

.mapping-row:nth-child(even) {
  background: var(--bg);
}

.col {
  padding: 0.25rem;
}

/* Make schema field column more prominent */
.col.schema-field {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 6px;
  padding: 0.5rem;
}

.field-mapping {
  width: 100%;
  padding: 0.75rem;
  border: 2px solid var(--border);
  border-radius: 6px;
  background: var(--card-bg) !important;
  color: var(--text) !important;
  font-size: 0.9rem;
  font-weight: 500;
  transition: all 0.2s ease;
  cursor: pointer;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

.field-mapping:hover {
  border-color: var(--accent);
  background: var(--bg) !important;
  transform: translateY(-1px);
}

.field-mapping:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(74, 124, 89, 0.3);
}

/* Ensure dropdown options are visible */
.field-mapping option {
  background: var(--card-bg) !important;
  color: var(--text) !important;
  padding: 0.5rem;
  font-weight: 500;
  border: none;
}

.field-mapping option:hover {
  background: var(--accent) !important;
  color: white !important;
}

/* Style for selected option */
.field-mapping option:checked {
  background: var(--accent) !important;
  color: white !important;
  font-weight: 600;
}

/* Visual states for mapped vs unmapped */
.field-mapping.mapped {
  border-color: var(--success);
}

.field-mapping.unmapped {
  border-color: var(--danger);
}

/* Simple selection change animation */
.field-mapping.selection-changed {
  animation: selectionPulse 0.2s ease-in-out;
}

@keyframes selectionPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

/* Simple dropdown arrow */
.field-mapping {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e") !important;
  background-repeat: no-repeat !important;
  background-position: right 0.5rem center !important;
  background-size: 1em !important;
  padding-right: 2rem !important;
}

.confidence-score {
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.8rem;
  font-weight: 500;
}

.confidence-score.high {
  background: rgba(76, 175, 80, 0.1);
  color: var(--success);
}

.confidence-score.medium {
  background: rgba(255, 193, 7, 0.1);
  color: #ffc107;
}

.confidence-score.low {
  background: rgba(244, 67, 54, 0.1);
  color: var(--danger);
}

.confidence-score.unmapped {
  background: rgba(158, 158, 158, 0.1);
  color: var(--muted);
}

.status {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  font-size: 0.8rem;
  font-weight: 500;
}

.status.mapped {
  color: var(--success);
}

.status.unmapped {
  color: var(--danger);
}

.data-preview {
  border: 1px solid var(--border);
  border-radius: 6px;
  overflow: auto;
  max-height: 500px;
}

.preview-table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}

.preview-header {
  background: var(--accent);
  color: white;
  font-weight: 500;
  position: sticky;
  top: 0;
  z-index: 10;
}

.preview-header .preview-col {
  padding: 0.75rem 0.5rem;
  text-align: left;
  border-right: 1px solid rgba(255, 255, 255, 0.2);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 150px;
  min-width: 150px;
  max-width: 200px;
}

.preview-header .preview-col:last-child {
  border-right: none;
}

.preview-row {
  border-bottom: 1px solid var(--border);
}

.preview-row:nth-child(even) {
  background: var(--bg);
}

.preview-row .preview-col {
  padding: 0.5rem;
  border-right: 1px solid var(--border);
  word-break: break-word;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 150px;
  min-width: 150px;
  max-width: 200px;
  vertical-align: top;
}

.preview-row .preview-col:last-child {
  border-right: none;
}

.value {
  color: var(--text);
}

.empty {
  color: var(--muted);
  font-style: italic;
}

.no-preview {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 2rem;
  color: var(--muted);
  text-align: center;
  justify-content: center;
}

.action-buttons {
  display: flex;
  gap: 1rem;
  margin-top: 2rem;
  padding-top: 1rem;
  border-top: 1px solid var(--border);
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}
</style>
{% endblock %}
